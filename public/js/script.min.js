document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("registerBtn"),t=document.getElementById("loginBtn");function r(e,t){fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}).then((e=>{if(console.log(e),e.redirected)window.location.href=e.url;else if(200===e.status)return e.json().then((e=>{Swal.fire({icon:e.success?"success":"error",title:e.success?"Success!":"Oops...",text:e.message,confirmButtonText:"OK"})}))})).catch((e=>console.error("Error:",e)))}function n(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}e&&e.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("name").value.trim(),s=document.getElementById("email").value.trim(),a=document.getElementById("confirmEmail").value.trim(),o=document.getElementById("password").value.trim();let l=[];t||l.push("Full Name is required."),n(s)||l.push("Enter a valid email address."),s!==a&&l.push("Email and Confirm Email are not same."),o.length<6&&l.push("Password must be at least 6 characters long."),l.length>0?Swal.fire({icon:"error",title:"Error",html:l.join("<br>"),confirmButtonText:"OK"}):r("/register",{username:s,password:o})})),t&&t.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("email").value.trim(),s=document.getElementById("password").value.trim();t&&s?n(t)?s.length<6?Swal.fire({icon:"error",title:"Weak Password",text:"Password must be at least 6 characters long."}):r("/login",{username:t,password:s}):Swal.fire({icon:"error",title:"Invalid Email",text:"Please enter a valid email address."}):Swal.fire({icon:"error",title:"Missing Fields",text:"Please fill in both email and password."})}))}));