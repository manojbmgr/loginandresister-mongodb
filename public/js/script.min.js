document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("registerBtn"),t=document.getElementById("loginBtn");function n(e,t){fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)}).then((t=>(console.log(t),200===t.status&&"/login"===e?t.json().then((e=>{Swal.fire({icon:e.success?"success":"error",title:e.success?"Success!":"Oops...",text:e.message,confirmButtonText:"OK"}).then((()=>{e.success&&(window.location.href="/")}))})):200===t.status&&"/register"===e?t.json().then((e=>{Swal.fire({icon:e.success?"success":"error",title:e.success?"Success!":"Oops...",text:e.message,confirmButtonText:"OK"}).then((()=>{e.success&&(window.location.href="/login")}))})):void 0))).catch((e=>console.error("Error:",e)))}e&&e.addEventListener("click",(e=>{e.preventDefault();const t={name:document.getElementById("name").value.trim(),email:document.getElementById("email").value.trim(),confirmEmail:document.getElementById("confirmEmail").value.trim(),password:document.getElementById("password").value.trim()};let s=function(e){let t=[];var n,s;return e.name||t.push("Full Name is required."),n=e.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)||t.push("Enter a valid email address."),e.email!==e.confirmEmail&&t.push("Email and Confirm Email do not match."),s=e.password,/^(?=.*[a-z])(?=.*[A-Z])(?=.*\W).{8,}$/.test(s)||t.push("Password must be at least 8 characters long and include a capital letter, lowercase letter, and special character."),t}(t);s.length>0?Swal.fire({icon:"error",title:"Error",html:s.join("<br>"),confirmButtonText:"OK"}):n("/register",{username:t.email,password:t.password})})),t&&t.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("email").value.trim(),s=document.getElementById("password").value.trim();let r=[];t&&s||r.push("Username and password is required."),r.length>0?Swal.fire({icon:"error",title:"Validation Error",html:r.join("<br>"),confirmButtonText:"OK"}):n("/login",{username:t,password:s})}))}));